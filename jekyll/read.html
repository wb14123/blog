---
layout: post
title: Read
---

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script>

function link(item) {
  return $('<a>').attr('href', 'http://book.douban.com/subject/' + item.book.id)
    .attr('title', item.book.title);
}

function getBook(to, cb) {
  var url = 'http://api.douban.com/v2/book/user/42177876/collections?to=' + to + '&count=200&alt=xd&callback=?';
  $.getJSON(url, function(data){
    $.each(data.collections, function (i, item) {
      if (i === (data.collections.length - 1) && data.count < data.total) {
        cb(item.updated);
      }
      $("<img/>")
        .attr("src", item.book.images.medium)
        .appendTo('#' + item.status)
        .wrap(link(item));
    });
  });
}

function bookCallback(d) {
  console.log(d);
  getBook((new Date(d)).toISOString(), bookCallback);
}

getBook('', bookCallback);

</script>

<h2>I'm reading</h2>
<div id="reading"></div>
<h2>I have read</h2>
<div id="read"></div>
<h2>I wish to read</h2>
<div id="wish"></div>

Powered by <a href="http://www.douban.com">Douban</a> API.
